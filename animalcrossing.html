<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Office Widget</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: #f5e6d3;
      overflow: hidden;
      height: 100vh;
    }

    .container {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #video-background {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100vw;
      height: 100vh;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 1;
    }

    #video-background iframe {
      width: 100vw;
      height: 56.25vw;
      min-height: 100vh;
      min-width: 177.77vh;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .player-wrapper {
      position: relative;
      z-index: 10;
      text-align: center;
    }

    .player-controls {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50px;
      padding: 20px 30px;
      display: inline-flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(10px);
    }

    .control-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      background: #8b7355;
      color: white;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: #6d5a44;
      transform: scale(1.1);
    }

    .control-btn:active {
      transform: scale(0.95);
    }

    .time-display {
      font-size: 18px;
      font-weight: bold;
      color: #8b7355;
      min-width: 80px;
    }

    .timer-buttons {
      display: flex;
      gap: 8px;
      margin-top: 15px;
      justify-content: center;
    }

    .timer-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 20px;
      background: #8b7355;
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .timer-btn:hover {
      background: #6d5a44;
      transform: translateY(-2px);
    }

    .prompt {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 15px 25px;
      border-radius: 25px;
      font-size: 14px;
      color: #8b7355;
      z-index: 10;
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .prompt.hidden {
      opacity: 0;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .player-wrapper {
      animation: float 3s ease-in-out infinite;
    }

    .track-info {
      margin-top: 10px;
      font-size: 12px;
      color: #8b7355;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Background video will load automatically -->
    <div id="video-background"></div>

    <div class="player-wrapper">
      <div class="player-controls">
        <button class="control-btn" onclick="togglePlay()" id="playBtn">▶</button>
        <button class="control-btn" onclick="changeMusic()" title="Next Track">⏭️</button>
        <div class="time-display" id="timeDisplay">00:00:00</div>
      </div>
      
      <div class="timer-buttons">
        <button class="timer-btn" onclick="startTimer(5)">5 Minutes</button>
        <button class="timer-btn" onclick="startTimer(15)">15 Minutes</button>
        <button class="timer-btn" onclick="startTimer(30)">30 Minutes</button>
      </div>
      
      <div class="track-info" id="trackInfo">Track 1</div>
    </div>

    <div class="prompt" id="prompt">Click play to start your music!</div>
  </div>

  <script>
    // Configuration with your YouTube videos
    const CONFIG = {
      backgroundVideo: 'GsY331YBUkg',
      musicTracks: [
        { id: 'eH-_GMhH-kk', name: 'Office' },
        { id: 'e31bDun8DeA', name: 'Office Lo-fi' },
        { id: 'ZAl-QnU-OjE', name: 'Busy Bee Office' }
      ]
    };

    let backgroundPlayer;
    let musicPlayer;
    let isPlaying = false;
    let currentTrackIndex = 0;
    let countdown;
    let timeRemaining = 0;
    const prompt = document.getElementById('prompt');
    const playBtn = document.getElementById('playBtn');
    const trackInfo = document.getElementById('trackInfo');

    // Load YouTube IFrame API
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Initialize players when API is ready
    function onYouTubeIframeAPIReady() {
      // Background video player (muted, looping)
      backgroundPlayer = new YT.Player('video-background', {
        videoId: CONFIG.backgroundVideo,
        playerVars: {
          autoplay: 1,
          controls: 0,
          showinfo: 0,
          modestbranding: 1,
          loop: 1,
          fs: 0,
          cc_load_policy: 0,
          iv_load_policy: 3,
          autohide: 1,
          mute: 1,
          playlist: CONFIG.backgroundVideo
        },
        events: {
          onReady: (event) => {
            event.target.setVolume(0);
            event.target.playVideo();
          }
        }
      });

      // Create hidden div for music player
      const musicDiv = document.createElement('div');
      musicDiv.id = 'music-player';
      musicDiv.style.display = 'none';
      document.body.appendChild(musicDiv);

      // Music player (with sound)
      musicPlayer = new YT.Player('music-player', {
        videoId: CONFIG.musicTracks[0].id,
        playerVars: {
          autoplay: 0,
          controls: 0
        },
        events: {
          onReady: (event) => {
            event.target.setVolume(50);
            updateTrackInfo();
          },
          onStateChange: (event) => {
            // Loop the current track
            if (event.data === YT.PlayerState.ENDED) {
              musicPlayer.playVideo();
            }
          }
        }
      });
    }

    function togglePlay() {
      if (!musicPlayer) return;
      
      if (isPlaying) {
        musicPlayer.pauseVideo();
        playBtn.textContent = '▶';
        isPlaying = false;
      } else {
        musicPlayer.playVideo();
        playBtn.textContent = '⏸';
        isPlaying = true;
        prompt.classList.add('hidden');
      }
    }

    function changeMusic() {
      if (!musicPlayer) return;
      
      currentTrackIndex = (currentTrackIndex + 1) % CONFIG.musicTracks.length;
      const wasPlaying = isPlaying;
      
      musicPlayer.loadVideoById(CONFIG.musicTracks[currentTrackIndex].id);
      
      if (wasPlaying) {
        setTimeout(() => musicPlayer.playVideo(), 500);
      }
      
      updateTrackInfo();
    }

    function updateTrackInfo() {
      trackInfo.textContent = CONFIG.musicTracks[currentTrackIndex].name;
    }

    function updateTime() {
      if (timeRemaining > 0) {
        const hours = Math.floor(timeRemaining / 3600);
        const minutes = Math.floor((timeRemaining % 3600) / 60);
        const seconds = timeRemaining % 60;
        
        document.getElementById('timeDisplay').textContent = 
          `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        
        timeRemaining--;
        countdown = setTimeout(updateTime, 1000);
      } else {
        showCurrentTime();
      }
    }

    function startTimer(minutes) {
      clearTimeout(countdown);
      timeRemaining = minutes * 60;
      updateTime();
    }

    function showCurrentTime() {
      const now = new Date();
      document.getElementById('timeDisplay').textContent = now.toLocaleTimeString('en-US', {
        hour12: false,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
    }

    // Show current time initially
    setInterval(() => {
      if (timeRemaining === 0) {
        showCurrentTime();
      }
    }, 1000);
    showCurrentTime();

    // Hide prompt after 5 seconds
    setTimeout(() => {
      prompt.classList.add('hidden');
    }, 5000);
  </script>
</body>
</html>
